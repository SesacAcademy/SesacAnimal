# ğŸ“ í”„ë¡œì íŠ¸ ì†Œê°œ

![image](https://github.com/SesacAcademy/SesacAnimal/assets/55624470/37b816ce-9cb4-4934-866d-9782e64e9ea7)

<br/>

> ë§¤ë…„ ìœ ê¸°ê²¬ë“¤ì´ ëŠ˜ì–´ë‚¨ì— ë”°ë¼ ë§ì€ ìœ ê¸°ê²¬ë“¤ì—ê²Œ ë³´í˜¸ì™€ ëŒë´„ì´ í•„ìš”í•˜ì§€ë§Œ ìì›ì´ ë¶€ì¡±í•œ ìƒí™©ì…ë‹ˆë‹¤.
>
> ìƒˆì‹¹ ì• ë‹ˆë©€ì€ ì´ëŸ¬í•œ ìƒí™©ì„ ê°œì„ í•˜ê³  ìœ ê¸°ê²¬ì—ê²Œ ë” ë‚˜ì€ ë¯¸ë˜ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ìœ ê¸°ê²¬ ì…ì–‘/ì„ë³´ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. <br/> <br/>
> ê°œë°œ ì¸ì› : 4ëª… (ë°•ì„±ìˆ˜, ë¥˜ëª…í•œ, ì´ê²½ì§„, ì†ìŠ¹ë²”) <br/>
> ê°œë°œ ê¸°ê°„ : 2023.11.01 ~ 2023.11.17

### Members

<table>
  <tr>
  	<td align="center">
      <a href="https://github.com/akgkfk3">
        <img
          src="https://avatars.githubusercontent.com/u/55624470?s=400&u=ce4242f40204eaf9a56687b9a2e510e3e805e505&v=4"
          width="100px;"
        /><br />ë°•ì„±ìˆ˜(BE)</a><br />
		íŒ€ì¥
    </td>
	<td align="center">
      <a href="https://github.com/devsince2021">
	<img
          src="https://avatars.githubusercontent.com/u/77978026?v=4"    
          width="100px;" 
        /><br />ë¥˜ëª…í•œ(BE)</a><br />
		íŒ€ì›
    </td>
    <td align="center">
      <a href="https://github.com/dev-lkj">
        <img
          src="https://avatars.githubusercontent.com/u/96426410?v=4"
          width="100px;"
        /><br />ì´ê²½ì§„(BE)</a><br />
	    	íŒ€ì›
    </td>
    <td align="center">
      <a href="https://github.com/sonnbeom">
        <img
          src="https://avatars.githubusercontent.com/u/127067296?v=4"
          width="100px;"
        /><br />ì†ìŠ¹ë²”(BE)</a><br />
	    	íŒ€ì›
    </td>
  </tr>
</table>

<br/>

## ğŸ’â€â™‚ï¸ Wiki

- ğŸ“… [ê°œë°œ ì¼ì •](https://github.com/SesacAcademy/SesacAnimal/wiki/%F0%9F%93%85-%EA%B0%9C%EB%B0%9C-%EC%9D%BC%EC%A0%95)
- ğŸŒ [ì‹¤ì„œë²„ ë§í¬ (ë°°í¬ì™„ë£Œ)](https://toyproject.shucloud.site/)
- ğŸ“Œ [Ground Rule](https://github.com/SesacAcademy/SesacAnimal/wiki/%F0%9F%93%8C-Ground-Rule)
- ğŸ¤™Â [ì»¨ë²¤ì…˜](https://github.com/SesacAcademy/SesacAnimal/wiki/%F0%9F%A4%99-%EC%BB%A8%EB%B2%A4%EC%85%98)
- ğŸ“ [ë””ë ‰í† ë¦¬ êµ¬ì¡°](https://github.com/SesacAcademy/SesacAnimal/wiki/%F0%9F%93%81-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EA%B5%AC%EC%A1%B0)
- ğŸ“œ [API ëª…ì„¸ì„œ](https://documenter.getpostman.com/view/28283234/2s9YRB2rty)
- ğŸ–¼ï¸ [ì™€ì´ì–´í”„ë ˆì„](https://www.figma.com/file/HCFnoJsXRjHzAwIavRGfh4/Sesac-Animal?type=design&node-id=28-2&mode=design)
- ğŸ“š [ë‹¤ì´ì–´ê·¸ë¨ (í´ë˜ìŠ¤, ì‹œí€€ìŠ¤)](<https://github.com/SesacAcademy/SesacAnimal/wiki/%F0%9F%93%9A-%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8-(%ED%81%B4%EB%9E%98%EC%8A%A4,-%EC%8B%9C%ED%80%80%EC%8A%A4)>)

<br/>

## ğŸ›  ì‚¬ìš© ê¸°ìˆ 

<b>[Front-end]</b>
<br/>
<img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white">
<img src="https://img.shields.io/badge/css3-1572B6?style=for-the-badge&logo=css3&logoColor=white">
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<br/>
<img src="https://img.shields.io/badge/BootStrap-7952B3?style=for-the-badge&logo=BootStrap&logoColor=white">
<img src="https://img.shields.io/badge/jQuery-0769AD?style=for-the-badge&logo=jQuery&logoColor=white">
<img src="https://img.shields.io/badge/fontawesome-339AF0?style=for-the-badge&logo=fontawesome&logoColor=white">

<b>[Back-end]</b>
<br/>
<img src="https://img.shields.io/badge/OpenJDK 17-999999?style=for-the-badge&logo=OpenJDK&logoColor=white">
<img src="https://img.shields.io/badge/mysql 8.0-4479A1?style=for-the-badge&logo=mysql&logoColor=white">
<img src="https://img.shields.io/badge/Redis 5.0.3-DC382D?style=for-the-badge&logo=redis&logoColor=white">
<br/>
<img src="https://img.shields.io/badge/spring 5.3-6DB33F?style=for-the-badge&logo=spring&logoColor=white">
<img src="https://img.shields.io/badge/springboot 2.7-6DB33F?style=for-the-badge&logo=springBoot&logoColor=white">
<img src="https://img.shields.io/badge/spring security 5.7-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white">
<br/>
<img src="https://img.shields.io/badge/Hibernate 5.1-59666C?style=for-the-badge&logo=hibernate&logoColor=white">
<img src="https://img.shields.io/badge/spring data jpa 2.7-A81C7D?style=for-the-badge">
<img src="https://img.shields.io/badge/QueryDSL 5.0-A81C7D?style=for-the-badge">

<b>[Tool & Environment]</b>
<br/>
<img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
<img src="https://img.shields.io/badge/gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white">
<img src="https://img.shields.io/badge/linux-FCC624?style=for-the-badge&logo=linux&logoColor=black">
<img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=Docker&logoColor=black">
<img src="https://img.shields.io/badge/postman-FF6C37?style=for-the-badge&logo=postman&logoColor=white">
<br/>
<br/>

## ğŸ”¨ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

![image](https://github.com/SesacAcademy/SesacAnimal/assets/55624470/1ffa4dcf-22c2-4451-a8e0-f7458b4f53b1)

<br/>

## ğŸ—’ï¸ ERD ì„¤ê³„

- [ERD ë§í¬](https://www.erdcloud.com/d/ThYDwhruPuZBwNyE9)

![image](https://github.com/SesacAcademy/SesacAnimal/assets/55624470/3574c649-eea8-4932-83ad-f772b691c36c)

<br/>

## ğŸ’¡ ì£¼ìš” ì—…ë¬´

#### ğŸ‘©â€ğŸ‘§ íšŒì› (ë°•ì„±ìˆ˜)

- ì´ë©”ì¼ ì¸ì¦ì„ í†µí•œ íšŒì›ê°€ì… ê¸°ëŠ¥
  - ğŸ“Œ Code - [[íšŒì›ê°€ì…_ì„œë¹„ìŠ¤]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/member/service/MemberServiceImp.java#L58) [[ë©”ì¼ ì¸ì¦_í”„ë¡œë°”ì´ë”]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/global/common/provider/MailAuthCodeProvider.java#L72)
  - ğŸ”€ [Flow Chart](https://shu0622.notion.site/shu0622/Flow-Chart-8a9a4fc2c2ff438085c21cd695ab0e31)


- (Spring Security í™œìš©) JWT í† í° ê¸°ë°˜ ë°©ì‹ì˜ ë¡œê·¸ì¸ ê¸°ëŠ¥
  
  - ğŸ“Œ Code - [[ë¡œê·¸ì¸_ì»¨íŠ¸ë¡¤ëŸ¬]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/member/controller/LoginController.java#L59) [[JWT_ì˜ˆì™¸ í•„í„°]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/global/common/filter/JwtExceptionFilter.java#L32) [[JWT_ì¸ì¦ í•„í„°]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/global/common/filter/JwtAuthenticationFilter.java#L32) [[JWT í† í°_í”„ë¡œë°”ì´ë”]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/global/common/provider/JwtTokenProvider.java#L58)
  - ğŸ”€ [Flow Chart](https://shu0622.notion.site/shu0622/Flow-Chart-8a9a4fc2c2ff438085c21cd695ab0e31#9c32c40340584311843f616c662a8380)

- ì¹´ì¹´ì˜¤ í”Œë«í¼ì„ ì´ìš©í•œ ì†Œì…œ ë¡œê·¸ì¸ ê¸°ëŠ¥
  - Code - ğŸ“Œ [[ë¡œê·¸ì¸_ì»¨íŠ¸ë¡¤ëŸ¬]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/member/controller/LoginController.java#L86)

- ì‚¬ìš©ì ì •ë³´ë¥¼ í†µí•œ ì•„ì´ë”” ì°¾ê¸°, SMS ë¬¸ì ì¸ì¦ì„ í†µí•œ ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ê¸°ëŠ¥
  - ğŸ“Œ Code - [[ì•„ì´ë”” ì°¾ê¸°_ì„œë¹„ìŠ¤]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/member/service/MemberServiceImp.java#L197) [[ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°_ì„œë¹„ìŠ¤]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/member/service/MemberServiceImp.java#L158) [[ë¬¸ì ì¸ì¦_í”„ë¡œë°”ì´ë”]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/global/common/provider/SmsAuthCodeProvider.java#L37)
  - ğŸ”€ Flow Chart - [[ì•„ì´ë”” ì°¾ê¸°]](https://shu0622.notion.site/shu0622/Flow-Chart-8a9a4fc2c2ff438085c21cd695ab0e31#c36c3add9b4f49678fc25a04be0a4183) [[ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°]](https://shu0622.notion.site/shu0622/Flow-Chart-8a9a4fc2c2ff438085c21cd695ab0e31#4529c9e978d247519979442eed80a2a3)

- MyPage ì—ì„œì˜ íšŒì› íƒˆí‡´, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, ë‚´ ê²Œì‹œê¸€ ëª©ë¡ ê¸°ëŠ¥
  - ğŸ“Œ Code - [[íšŒì› íƒˆí‡´_ì»¨íŠ¸ë¡¤ëŸ¬]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/member/controller/MyPageController.java#L63) [[ë¹„ë°€ë²ˆí˜¸ ë³€ê²½_ì»¨íŠ¸ë¡¤ëŸ¬]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/member/controller/MyPageController.java#L98) [[ë‚´ ê²Œì‹œê¸€ ëª©ë¡_ì»¨íŠ¸ë¡¤ëŸ¬]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/member/controller/MyPageController.java#L117)
  - ğŸ”€ Flow Chart - [[íšŒì› íƒˆí‡´]](https://shu0622.notion.site/shu0622/Flow-Chart-8a9a4fc2c2ff438085c21cd695ab0e31#d7343e687a8148a0b12d2b148931e23c) [[ë¹„ë°€ë²ˆí˜¸ ë³€ê²½]](https://shu0622.notion.site/shu0622/Flow-Chart-8a9a4fc2c2ff438085c21cd695ab0e31#2c1f8f503d7c41969da4a4974664a533) [[ë‚´ ê²Œì‹œê¸€ ëª©ë¡]](https://shu0622.notion.site/shu0622/Flow-Chart-8a9a4fc2c2ff438085c21cd695ab0e31#062fd5802ff0409b874b5e0b052f4b78)

- Oracle Cloud ë° Dockerë¥¼ í™œìš©í•œ ê¸°ë³¸ ì¸í”„ë¼ êµ¬ì¶•

- Gitea ë° Jenkins CI/CD Pipeline êµ¬ì¶•

- Certbot, Let's Encrypt ì´ìš©í•˜ì—¬ HTTPS ì ìš© (SSL-Offloading)

#### ğŸš¨ ì‹¤ì¢… (ë¥˜ëª…í•œ)

- Redisë¥¼ ì‚¬ìš©í•˜ì—¬ ê²Œì‹œê¸€ ë³„ë¡œ 'ì¢‹ì•„ìš” count'ë¥¼ ìºì‹± ğŸ“Œ [[ê²Œì‹œê¸€_ì„œë¹„ìŠ¤]](https://github.com/SesacAcademy/SesacAnimal/blob/53c13d605969c36d2e8a70b4d4d4c364014cb3cd/src/main/java/com/project/animal/missing/service/MissingPostServiceImpl.java#L60C1-L85C4)
  [[ì¢‹ì•„ìš”_ì„œë¹„ìŠ¤]](https://github.com/SesacAcademy/SesacAnimal/blob/53c13d605969c36d2e8a70b4d4d4c364014cb3cd/src/main/java/com/project/animal/missing/service/MissingLikeServiceImpl.java#L32C1-L37C1)
  [[ìºì‹œ_ì„œë¹„ìŠ¤]](https://github.com/SesacAcademy/SesacAnimal/blob/53c13d605969c36d2e8a70b4d4d4c364014cb3cd/src/main/java/com/project/animal/missing/service/MissingLikeCacheServiceImpl.java#L24C1-L37C4)
  <br />
  _-> ê²Œì‹œê¸€ ëª©ë¡ì—ì„œ 'ì¢‹ì•„ìš” count' ë…¸ì¶œì‹œ íš¨ìœ¨ì„± í–¥ìƒ_

- 'ì¢‹ì•„ìš”' í˜¸ì¶œì‹œ Redisì™€ db ë™ì‹œ ê°±ì‹ ì„ í†µí•œ ë™ê¸°í™” ğŸ“Œ [[ì¢‹ì•„ìš”_ì„œë¹„ìŠ¤]](https://github.com/SesacAcademy/SesacAnimal/blob/53c13d605969c36d2e8a70b4d4d4c364014cb3cd/src/main/java/com/project/animal/missing/service/MissingLikeServiceImpl.java#L55-L82)
  [[ìºì‹œ_ì„œë¹„ìŠ¤]](https://github.com/SesacAcademy/SesacAnimal/blob/2d9c2dc57077e5e9d376245170cc2e9a9d96d619/src/main/java/com/project/animal/missing/service/MissingLikeCacheServiceImpl.java#L51C1-L60C4)
  [[ë ˆë””ìŠ¤_ì„œë¹„ìŠ¤]](https://github.com/SesacAcademy/SesacAnimal/blob/2d9c2dc57077e5e9d376245170cc2e9a9d96d619/src/main/java/com/project/animal/global/common/provider/RedisServiceProvider.java#L105C3-L123C6)
  <br />
  _-> Redisì˜ INCRì™€ DECRë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì‹œì„± í™•ë³´_

- ë³µí•© ì¡°ê±´ìœ¼ë¡œ í•„í„°ë§í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„ ğŸ“Œ [[ê²Œì‹œê¸€_ë ˆí¬ì§€í† ë¦¬]](https://github.com/SesacAcademy/SesacAnimal/blob/2d9c2dc57077e5e9d376245170cc2e9a9d96d619/src/main/java/com/project/animal/missing/repository/CustomMissingPostRepositoryImpl.java#L29C1-L62C4)
  <br /> -> Querydslì„ ì‚¬ìš©í•˜ì—¬ ë™ì  ì¿¼ë¦¬ êµ¬í˜„

- í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ğŸ“Œ [[ì»¨íŠ¸ë¡¤ëŸ¬_í…ŒìŠ¤íŠ¸]](https://github.com/SesacAcademy/SesacAnimal/blob/2d9c2dc57077e5e9d376245170cc2e9a9d96d619/src/main/java/com/project/animal/missing/repository/CustomMissingPostRepositoryImpl.java#L29C1-L62C4)
  [[ì„œë¹„ìŠ¤_í…ŒìŠ¤íŠ¸]](https://github.com/SesacAcademy/SesacAnimal/blob/2d9c2dc57077e5e9d376245170cc2e9a9d96d619/src/test/java/com/project/animal/missing/controller/MissingControllerTest.java#L54C3-L139C4)
  <br /> -> Junit5ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì‘ì„±

- ë©”ì†Œë“œì˜ ì‹¤í–‰ ì†ë„ ì¸¡ì •ì„ ìœ„í•œ AOP ì‘ì„± ğŸ“Œ [[í”„ë¡œíŒŒì¼_AOP]](https://github.com/SesacAcademy/SesacAnimal/blob/2d9c2dc57077e5e9d376245170cc2e9a9d96d619/src/main/java/com/project/animal/global/common/aop/ProfileAspect.java#L1C1-L33C2)
  <br /> -> í´ë˜ìŠ¤ ë ˆë²¨ê³¼ ë©”ì†Œë“œ ë ˆë²¨ì— ëª¨ë‘ ì ìš©ê°€ëŠ¥

#### ğŸˆ ì…ì–‘/ì„ë³´ (ì´ê²½ì§„)

#### âœï¸ ì…ì–‘ í›„ê¸° (ì†ìŠ¹ë²”)
- ê³„ì¸µ êµ¬ì¡°ë¥¼ í™œìš©í•´ ëŒ“ê¸€, ëŒ€ëŒ“ê¸€ êµ¬í˜„ ğŸ“Œ [[ì½”ë“œ í™•ì¸ 1]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/review/service/ReviewCommentService.java#L68) [[ì½”ë“œ í™•ì¸ 2]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/review/repository/ReviewCommentCustomRepository.java#L25)
  
- ì œëª©, ì‘ì„±ì, ë‚´ìš©ì„ í†µí•œ ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„ ğŸ“Œ [[ì½”ë“œ í™•ì¸ 1]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/review/repository/ReviewPostCustomRepository.java#L29) [[ì½”ë“œ í™•ì¸ 2]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/review/service/ReviewService.java#L72)
  
- ì¢‹ì•„ìš”ìˆœ, ì¡°íšŒìˆœì— ë”°ë¥¸ ì •ë ¬ ê¸°ëŠ¥  êµ¬í˜„ ğŸ“Œ [[ì½”ë“œ í™•ì¸ 1]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/review/repository/ReviewPostCustomRepository.java#L71) [[ì½”ë“œ í™•ì¸ 2]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/review/service/ReviewService.java#L55)

<br/>

## ğŸŒŸ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

<details>
<summary>ë°•ì„±ìˆ˜</summary>
<hr/>

- ğŸ“Œ [[ì½”ë“œ í™•ì¸]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/global/common/filter/JwtExceptionFilter.java#L87)
<table>
  	<tr>
  		<td align="center">
      			ë¬¸ì œ ìƒí™©
    		</td>
		<td>
      			JWT ë¦¬í”„ë ˆì‹œ í† í° ë§Œë£Œ ì‹œ, í† í°ì´ ë‹´ê¸´ ì¿ í‚¤ê°€ ì‚­ì œë˜ì§€ ì•ŠìŒ
    		</td>
  	</tr>
	<tr>
		<td align="center">
			ì›ì¸
		</td>
		<td>
   			HttpServletRequest ê°ì²´ì— ë‹´ê¸´ ì¿ í‚¤ëŠ” ë‹¨ìˆœíˆ Key-Value ê°’ë§Œì„ ê°€ì§€ê³  ìˆê¸° Cookie ê°ì²´ì— setMaxAge() ì™¸ì— ì¶”ê°€ì ì¸ ì„¤ì • í•„ìš”
    		</td>
	</tr>
 	<tr>
     		<td align="center">
			í•´ê²°
		</td>
		<td>
      			ë§Œë£Œ ë‚ ì§œ (setMaxage), ê²½ë¡œ (setPath), ê°’ (setValue)ì„ ì§€ì •í•˜ì—¬ ì¿ í‚¤ë¥¼ ì‚­ì œ
    		</td>
      	</tr>
</table>

<pre>
<code>[Before]
private void removeTokenInCookie(HttpServletRequest request, HttpServletResponse response) {
	// request ê°ì²´ì—ì„œ JWT Tokenì´ ë‹´ê¸´ Cookieë¥¼ List í˜•íƒœë¡œ ê°€ì ¸ ì˜¨ë‹¤.
	List<Cookie> cookielist = Arrays.stream(request.getCookies())
			.filter(cookie -> {
				return cookie.getName().equals(JWT_ACCESS_TOKEN) || cookie.getName().equals(JWT_REFRESH_TOKEN);})
			.toList();

	// cookieì˜ íƒ€ì„ ì•„ì›ƒì„ 0ìœ¼ë¡œ ë§Œë“¤ê³  ë‹¤ì‹œ response ê°ì²´ì— ì €ì¥í•œë‹¤.
	cookielist.forEach(cookie -> {
		cookie.setMaxAge(0);
		response.addCookie(cookie);
	});
}
</code>
</pre>

<pre>
<code>[After]
private void removeTokenInCookie(HttpServletRequest request, HttpServletResponse response) {
	// request ê°ì²´ì—ì„œ JWT Tokenì´ ë‹´ê¸´ Cookieë¥¼ List í˜•íƒœë¡œ ê°€ì ¸ ì˜¨ë‹¤.
	List<Cookie> cookielist = Arrays.stream(request.getCookies())
			.filter(cookie -> {
				return cookie.getName().equals(JWT_ACCESS_TOKEN) || cookie.getName().equals(JWT_REFRESH_TOKEN);})
			.toList();

	// cookieì˜ íƒ€ì„ ì•„ì›ƒì„ 0ìœ¼ë¡œ ë§Œë“¤ê³  ë‹¤ì‹œ response ê°ì²´ì— ì €ì¥í•œë‹¤.
	cookielist.forEach(cookie -> {
		cookie.setMaxAge(0);
		cookie.setPath("/");
            	cookie.setValue(null);
		response.addCookie(cookie);
	});
}
</code>
</pre>

<hr/>
<table>
  	<tr>
  		<td align="center">
      			ë¬¸ì œ ìƒí™©  
    		</td>
		<td>
      			Controllerì—ì„œ Redirect ì‹œ, ë¸Œë¼ìš°ì €ì—ì„œ Redirectëœ ì£¼ì†Œë¡œ ì´ë™í•˜ì§€ ëª»í•¨
    		</td>
  	</tr>
	<tr>
		<td align="center">
			ì›ì¸
		</td>
		<td>
   			HTTP ìš”ì²­ì€ ë¡œë“œë°¸ëŸ°ì„œë¥¼ í†µí•´ Tomcatìœ¼ë¡œ ì „ë‹¬ë˜ê³  ì™¸ë¶€ í†µì‹ ì€ HTTPS, ë‚´ë¶€ í†µì‹ ì€ HTTPë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— Controllerì—ì„œ Redirect ì‹œ, Location í—¤ë”ì—ëŠ” "http://~~" ê°’ì´ ë“¤ì–´ê°€ê¸° ë•Œë¬¸
    		</td>
	</tr>
 	<tr>
     		<td align="center">
			í•´ê²°
		</td>
		<td>
      			ë‚´ë¶€ í†µì‹ ë„ Self-Signed Keyë¥¼ ìƒì„±í•˜ì—¬ HTTPS í†µì‹ ì„ í•´ë„ ë˜ì§€ë§Œ HTTP(80)ìœ¼ë¡œ ìš”ì²­ ì‹œ, HTTPS(443)ìœ¼ë¡œ Redirect í•˜ë„ë¡ HAProxy ì„¤ì •ì„ ì¶”ê°€
    		</td>
      	</tr>
</table>

<pre>
<code>[Before]
#---------------------------------------------------------------------
# main frontend which proxys to the backends
#---------------------------------------------------------------------
frontend main
    bind *:443 ssl crt /etc/haproxy/server.pem
    log 127.0.0.1:514 local1
    default_backend             app

#---------------------------------------------------------------------
# round robin balancing between the various backends
#---------------------------------------------------------------------
backend app
    balance     roundrobin
    server  was01 192.168.0.105:8001 check
    server  was02 192.168.0.105:8002 check
    server  was03 192.168.0.105:8003 check
</code>
</pre>

<pre>
<code>[After]
#---------------------------------------------------------------------
# main frontend which proxys to the backends
#---------------------------------------------------------------------
frontend main
    bind *:80
    bind *:443 ssl crt /etc/haproxy/server.pem
    http-request redirect scheme https unless { ssl_fc }
    log 127.0.0.1:514 local1
    default_backend             app

#---------------------------------------------------------------------
# round robin balancing between the various backends
#---------------------------------------------------------------------
backend app
    balance     roundrobin
    server  was01 192.168.0.105:8001 check
    server  was02 192.168.0.105:8002 check
    server  was03 192.168.0.105:8003 check
</code>
</pre>

<hr/>
 
</details>

<details>
<summary>ë¥˜ëª…í•œ</summary>
<hr/>

- ğŸ“Œ [[ì½”ë“œ í™•ì¸]](https://github.com/SesacAcademy/SesacAnimal/blob/2d9c2dc57077e5e9d376245170cc2e9a9d96d619/src/main/java/com/project/animal/missing/service/MissingLikeCacheServiceImpl.java#L51C1-L60C4)

<table>
  	<tr>
  		<td align="center">
      			ë¬¸ì œ #1
    		</td>
			<td>
      			Redisì˜ ìºì‹±ëœ ì¢‹ì•„ìš” Countë¥¼ ê°±ì‹ í•  ë•Œ ë™ì‹œì„± ì´ìŠˆ ë°œìƒ
    		</td>
  	</tr>
  	</tr>
	<tr>
		<td align="center">
			ì›ì¸
		</td>
		<td>
   			getê³¼ set ì—°ì‚° ì‚¬ì´ì— ë‹¤ë¥¸ ìŠ¤ë ˆë“œì˜ ìš”ì²­ì— ì˜í•´ ê°’ì´ ë³€ê²½ë  ìˆ˜ ìˆìŒ
    		</td>
	</tr>
 	<tr>
     		<td align="center">
			í•´ê²°
		</td>
		<td>
      			redisì—ì„œ ì œê³µí•˜ëŠ” ì›ìì„±ì„ ë³´ì¥í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ê²° (incr, dec)
    		</td>
      </tr>
</table>

<pre>
<code>[Before]
@Override
  public void update(long postId, int status) {
    String likeCountKey = cachePrefix + postId;
    Optional<String> maybeCurrentCount = redisServiceProvider.get(likeCountKey);

    int currentCount = maybeCurrentCount.isPresent()
            ? Integer.parseInt(maybeCurrentCount.get())
            : missingLikeRepository.likedCountByPostId(postId);

    int nextCount = status == ADD
            ? addCount(currentCount)
            : subCount(currentCount);

    redisServiceProvider.save(likeCountKey, nextCount);
  }


  private int addCount(int currentCount) {
    return currentCount + 1;
  }

  private int subCount(int currentCount) {
    return currentCount > 0 ? currentCount - 1 : 0;
  }
</code>
</pre>

<pre>
<code>[After]
  @Override
  public Optional<Integer> getCountByPostId(long postId) {
    String likeCountKey = cachePrefix + postId;
    Optional<String> maybeCurrentCount = redisServiceProvider.get(likeCountKey);

    Integer currentCount = maybeCurrentCount.isPresent()
            ? Integer.parseInt(maybeCurrentCount.get())
            : null;

    return Optional.ofNullable(currentCount);
  }

  @Override
  public void updateLike(long postId, int status) {
    String likeCountKey = cachePrefix + postId;

    if (status == ADD) {
      redisServiceProvider.increase(likeCountKey); // í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ incr ì‹¤í–‰
    } else {
      redisServiceProvider.decrease(likeCountKey); // í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ decr ì‹¤í–‰
    }
  }
</code>
</pre>

<hr/>

<table>
  	<tr>
  		<td align="center">
      			ë¬¸ì œ #2
    		</td>
			<td>
      			ê²Œì‹œíŒ ëª©ë¡ì—ì„œ ê²Œì‹œê¸€ ë³„ë¡œ ì¢‹ì•„ìš” ìˆ«ìë¥¼ í‘œí˜„í•˜ëŠ” ë¡œì§ì´ ë¹„íš¨ìœ¨ì ì¸ ìƒí™©
    		</td>
  	</tr>
  	</tr>
	<tr>
		<td align="center">
			ì›ì¸
		</td>
		<td>
   			ì´ˆê¸° í…Œì´ë¸” ì„¤ê³„ ì¢‹ì•„ìš” ìˆ«ì í‘œí˜„ì´ ê³ ë ¤ë˜ì§€ ì•ŠìŒ
    		</td>
	</tr>
	<tr>
		<td align="center">
			ì˜µì…˜
		</td>
		<td>
   			ì¢‹ì•„ìš” í…Œì´ë¸”ì„ ë°˜ì •ê·œí™” vs ë¯¸ë¦¬ ì§‘ê³„í•œ countë¥¼ ë³„ë„ì˜ ì¥ì†Œì— ìºì‹±
    		</td>
	</tr>
 	<tr>
     		<td align="center">
			ì„ íƒ
		</td>
		<td>
      			Redisë¥¼ ì‚¬ìš©í•˜ì—¬ ê²Œì‹œê¸€ ë³„ ì¢‹ì•„ìš” ìˆ«ìë¥¼ ìºì‹±í•¨
    		</td>
      </tr>
			<tr>
     		<td align="center">
			ê·¼ê±°
		</td>
		<td>
      			1. í”„ë¡œì íŠ¸ì—ì„œ ì´ë¯¸ Redisë¥¼ ì‚¬ìš© ì¤‘ì´ê¸° ë•Œë¬¸ì—, ì¦‰ì‹œ ì‚¬ìš©ê°€ëŠ¥í•œ ìƒí™© <br/> 2. í…Œì´ë¸” êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì€ ì„œë¹„ìŠ¤ ì „ë°˜ì— ì˜í–¥ì„ ë¯¸ì¹˜ê¸° ë•Œë¬¸ì— ê°œë°œ í›„ë°˜ë¶€ì— ì‘ì—…í•˜ê¸°ì— ë¶€ì ì ˆí•˜ë‹¤ê³  íŒë‹¨
    		</td>
      </tr>
</table>

<hr/>

</details>
</details>

<details>
<summary>ì´ê²½ì§„</summary>

<table>
  	<tr>
  		<td align="center">
      			ë¬¸ì œ ìƒí™©  
    		</td>
		<td>
      			ì‘ì„± ì˜ˆì •
    		</td>
  	</tr>
	<tr>
		<td align="center">
			ì›ì¸
		</td>
		<td>
   			ì‘ì„± ì˜ˆì •
    		</td>
	</tr>
 	<tr>
     		<td align="center">
			í•´ê²°
		</td>
		<td>
      			ì‘ì„± ì˜ˆì •
    		</td>
      	</tr>
</table>
</details>

<details>
<summary>ì†ìŠ¹ë²”</summary>

<hr/>

- ğŸ“Œ [[ì½”ë“œ í™•ì¸]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/review/repository/ReviewPostCustomRepository.java#L69)
<table>
  	<tr>
  		<td align="center">
      			ë¬¸ì œ#1 
    		</td>
		<td>
      			1. ì¢‹ì•„ìš”ìˆœìœ¼ë¡œ ê²Œì‹œê¸€ ì¡°íšŒì‹œ ë°ì´í„° ì •ë ¬ì„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì²˜ë¦¬<br> -> ì´ì— ë”°ë¥¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê³¼ë¶€í•˜ ê°€ëŠ¥ì„± ì¡´ì¬ 
    		</td>
  	</tr>
	<tr>
		<td align="center">
			ì›ì¸
		</td>
		<td>
   			1. ì´ˆê¸° ERD ì„¤ê³„ ì‹œ ê²Œì‹œê¸€ ì¢‹ì•„ìš” ìˆ«ì ë°˜ì˜í•˜ì§€ ì•ŠìŒ<br>
				2. DBì—ì„œ ì¡°íšŒì‹œ ì¿¼ë¦¬ë¥¼ í†µí•´ ë°ì´í„° ì •ë ¬í•˜ì§€ ì•ŠìŒ
    		</td>
	</tr>
 	<tr>
		<td align="center">
			ì˜µì…˜
		</td>
		<td>
   			ì¢‹ì•„ìš” í…Œì´ë¸”ì„ ë°˜ì •ê·œí™” vs ê° ê²Œì‹œê¸€ ë³„ë¡œ ì¢‹ì•„ìš” ìˆ«ìë§Œí¼ ê·¸ë£¹í™”í•˜ì—¬ ê·¸ í¬ê¸°ë³„ë¡œ ì •ë ¬
    		</td>
	</tr>
 	<tr>
     		<td align="center">
			ì„ íƒ
		</td>
		<td>
      			ê° ê²Œì‹œê¸€ ë³„ë¡œ ì¢‹ì•„ìš” ìˆ«ìë§Œí¼ ê·¸ë£¹í™”í•˜ì—¬ ê·¸ í¬ê¸°ë³„ë¡œ ì •ë ¬
    		</td>
      </tr>
			<tr>
     		<td align="center">
			ê·¼ê±°
		</td>
		<td>
      			ê°œë°œ ì¼ì •ì´ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì€ ìƒí™©ì—ì„œ í…Œì´ë¸” êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì€ í˜‘ì—…, ì½”ë“œ ìˆ˜ì •ì— ìˆì–´ì„œ ì˜ˆì¸¡ë¶ˆê°€ì˜ ê³¼ì—…ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤ê³  íŒë‹¨
    		</td>
      </tr>
</table>

<pre>
<code>[Before]
   public Page<ReviewPost> findAllByType(String type, Pageable pageable) {
        QReviewPost reviewPost = QReviewPost.reviewPost;
        QMember member = QMember.member;
        QReviewImage reviewImage = QReviewImage.reviewImage;

        BooleanBuilder builder = new BooleanBuilder();
        builder.and(reviewPost.isActive.eq(1));

        JPAQuery<ReviewPost> query = jpaQueryFactory
                .selectFrom(reviewPost)
                .leftJoin(reviewPost.member, member).fetchJoin()
                .where(builder);

        if ("view".equals(type)) {
            query.orderBy(reviewPost.viewCount.desc());
        } else if ("like".equals(type)) {
            query.groupBy(reviewPost.id)
                    .orderBy(reviewPost.reviewPostLikes.size().desc());
        }

        List<ReviewPost> content = query
                .offset(pageable.getOffset())
                .limit(pageable.getPageSize())
                .fetch();

        long total = jpaQueryFactory
                .selectFrom(reviewPost)
                .leftJoin(reviewPost.member, member)
                .leftJoin(reviewPost.reviewImages, reviewImage)
                .where(builder)
                .fetchCount();

        return new PageImpl<>(content, pageable, total);
    }
</code>
</pre>

<pre>
<code>[After]
public Page<ReviewPost> findAllByType(String type, Pageable pageable) {

        BooleanBuilder builder = new BooleanBuilder();
        builder.and(reviewPost.isActive.eq(1));

        JPAQuery<ReviewPost> query = jpaQueryFactory
                .selectFrom(reviewPost)
                .leftJoin(reviewPost.member, member).fetchJoin()
                .leftJoin(reviewPost.reviewPostLikes, reviewPostLike)
                .where(builder);

        if ("view".equals(type)) {
            query.orderBy(reviewPost.viewCount.desc());
        } else if ("like".equals(type)) {
            query.groupBy(reviewPost.id)
                    .orderBy(reviewPostLike.count().desc());
        }

        List<ReviewPost> content = query
                .offset(pageable.getOffset())
                .limit(pageable.getPageSize())
                .fetch();

        long total = jpaQueryFactory
                .selectFrom(reviewPost)
                .where(builder)
                .fetchCount();

        return new PageImpl<>(content, pageable, total);
    }
</code>
</pre>
- ğŸ“Œ [[ì½”ë“œ í™•ì¸]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/review/repository/ReviewCommentCustomRepository.java#25)
<table>
  	<tr>
  		<td align="center">
      			ë¬¸ì œ#2
    		</td>
		<td>
      			ë°ì´í„° ì¤‘ë³µ ë¡œë“œ, N+1ë¡œ ì¸í•œ ë¶ˆí•„ìš”í•œ ì¿¼ë¦¬ ë°œìƒ
    		</td>
  	</tr>
	<tr>
		<td align="center">
			ì›ì¸
		</td>
		<td>
   				N+1 ë¬¸ì œ ë°œìƒì„ ìœ„í•´ ì»¬ë ‰ì…˜ì„ íŒ¨ì¹˜ì¡°ì¸í•˜ì—¬ ë°ì´í„° ì¤‘ë³µì´ ë°œìƒ
    		</td>
	</tr>
 	<tr>
     		<td align="center">
			í•´ê²°
		</td>
		<td>
      			1. ToManyë¥¼ ë¡œë“œí•  ë•ŒëŠ” Batch í™œìš© <br>
				2. ê°€ì ¸ì™€ì•¼ í•  ì»¬ë ‰ì…˜ì˜ ì–‘ì´ ì œí•œì ì´ë¼ë©´ Batch í™œìš©ì´ ì•„ë‹Œ ì§ì ‘ ì¿¼ë¦¬ ì‘ì„± <br>
				3. ToOneì„ ë¡œë“œí•  ë•ŒëŠ” Fetch Join í™œìš© <br>
    		</td>
      </tr>
			
</table>

<pre>
<code>[Before]
     @Query(value = "SELECT p FROM ReviewPost p JOIN FETCH p.member m LEFT JOIN FETCH p.		reviewImages i WHERE p.isActive = 1",
            countQuery = "SELECT count(p.id) FROM ReviewPost p WHERE p.isActive = 1")
    Page<ReviewPost> findAllPrevious(Pageable pageable);
</code>
</pre>

<pre>
<code>[After]
 @Query(value = "SELECT p FROM ReviewPost p JOIN FETCH p.member m WHERE p.isActive = 1",
            countQuery = "SELECT count(p.id) FROM ReviewPost p WHERE p.isActive = 1")
    Page<ReviewPost> findAll(Pageable pageable);


	//ëŒ“ê¸€ì˜ ë°ì´í„°ê°€ ë°©ëŒ€í•  ì‹œì— Batchë¥¼ í™œìš©í•´ ê°€ì ¸ì˜¨ë‹¤ë©´ ë¶ˆí•„ìš”í•œ ë°ì´í„°ë¥¼ ë¡œë“œí•  ê²ƒì´ë¼ê³  íŒë‹¨
	//í›„ì— ë‚´ë¶€ ê²°ì •ì— ë”°ë¥¸ limitì„ ê±¸ ìˆ˜ ìˆê²Œ ì¿¼ë¦¬ ì§ì ‘ ì‘ì„±
	public List<ReviewComment> findAllByPostId(Long reviewPostId){
        QReviewComment reviewComment = QReviewComment.reviewComment;
        QMember member = QMember.member;
        return jpaQueryFactory.selectFrom(reviewComment)
                .leftJoin(reviewComment.member)
                .fetchJoin()
                .leftJoin(reviewComment.parentComment)
                .fetchJoin()
                .where(reviewComment.reviewPost.id.eq(reviewPostId))
                .orderBy(reviewComment.parentComment.id.asc().nullsFirst(), reviewComment.createdAt.desc())
                .fetch();
    }
</code>
</pre>
</details>

<br/>

## ğŸ‘©â€ğŸ’» ë¦¬íŒ©í† ë§

<details>
<summary>ë°•ì„±ìˆ˜</summary>

<hr/>

- ğŸ“Œ [[ì½”ë“œ í™•ì¸]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/global/common/resolver/MemberDtoArgumentResolver.java#L37)

<table>
  	<tr>
  		<td align="center">
      			Before
    		</td>
		<td>
      			ë„ë©”ì¸ë³„ Controllerì—ì„œ ì‚¬ìš©ì ì •ë³´ (MemberDto)ë¥¼ ì–»ê¸° ìœ„í•´, JWT í† í°ì— ë‹´ê¸´ í´ë ˆì„ì„ ì§ì ‘ íŒŒì‹±
    		</td>
  	</tr>
	<tr>
		<td align="center">
			After
		</td>
		<td>
   			MemberDtoì— ë§ëŠ” ArgumentResolverë¥¼ ì¶”ê°€í•˜ì—¬ Controllerì—ì„œ ì§ì ‘ íŒŒì‹±í•˜ì§€ ì•Šë„ë¡ ë³€ê²½ (ì¤‘ë³µ ì½”ë“œ ì œê±°)
    		</td>
	</tr>
</table>

<pre>
@Slf4j
@Component
@RequiredArgsConstructor
public class MemberDtoArgumentResolver implements HandlerMethodArgumentResolver {

    private final JwtTokenProvider jwtTokenProvider;

    @Override
    public boolean supportsParameter(MethodParameter parameter) {
        boolean hasMemberAnnotation = parameter.hasParameterAnnotation(Member.class);
        boolean hasMemberType = MemberDto.class.isAssignableFrom(parameter.getParameterType());

        return hasMemberAnnotation && hasMemberType;
    }

    @Override
    public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {

        HttpServletRequest request = (HttpServletRequest) webRequest.getNativeRequest();

        String token = jwtTokenProvider.resolveToken(request, JWT_ACCESS_TOKEN);

        // ê¸°ì¡´ ì¿ í‚¤ì— JWT Access í† í°ì´ ì—†ëŠ” ê²½ìš°, Request ì˜ì—­ì— ì €ì¥í•´ë‘” newAccessTokenì„ ì‚¬ìš©
        if (token == null && request.getAttribute(JWT_ACCESS_TOKEN) != null)
            token = (String) request.getAttribute(JWT_ACCESS_TOKEN);

        // ê¸°ì¡´ ì¿ í‚¤ì— JWT Access í† í°ì´ ìˆëŠ” ê²½ìš°, JWTë¥¼ íŒŒì‹±í•˜ì—¬ MemberDto ê°ì²´ë¡œ ë¦¬í„´
        if (token != null)
            return jwtTokenProvider.parseToken(token);

        // ì—†ìœ¼ë©´ null ê°’ ë¦¬í„´
        return null;
    }
}
</code>
</pre>

<hr/>

</details>

<details>
<summary>ë¥˜ëª…í•œ</summary>
<hr/>

- ğŸ“Œ [[ì½”ë“œ í™•ì¸]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/missing/repository/CustomMissingPostRepositoryImpl.java)

<table>
  	<tr>
  		<td align="center">
      			Before
    		</td>
		<td>
      			BooleanBuilderì™€ ë°˜ë³µë˜ëŠ” ifë¬¸ì„ ì‚¬ìš©í•˜ì—¬ í•„í„°ë¥¼ ìœ„í•œ ë™ì  ì¿¼ë¦¬ ìƒì„±
    		</td>
  	</tr>
	<tr>
		<td align="center">
			After
		</td>
		<td>
   			BooleanExpressionì„ ì‚¬ìš©í•˜ì—¬ ì¡°ê±´ë¬¸ì„ ì œê±°í•˜ê³  ì¿¼ë¦¬ë¥¼ ë³´ë‹¤ ì§ê´€ì ìœ¼ë¡œ ë³€ê²½
    		</td>
	</tr>
</table>

<pre>
<code>
 [Before]
 @Override
  public Page<MissingPost> findByFilter(MissingFilterDto filter, Pageable pageable) {
    QMissingPost qMissing = QMissingPost.missingPost;
    QMissingPostImage qImage = QMissingPostImage.missingPostImage;

    BooleanBuilder builder = new BooleanBuilder();

    builder.and(qMissing.isActive.eq(isActive));

    if (filter.getAnimalType() != null) {
      builder.and(qMissing.animalType.equalsIgnoreCase(filter.getAnimalType()));
    }

    if (filter.getFromDate() != null) {
      builder.and(qMissing.missingTime.goe(filter.getFromDate()));
    }

    if (filter.getEndDate() != null) {
      builder.and(qMissing.missingTime.loe(filter.getEndDate()));
    }

    if (filter.getSearch() != null && !filter.getSearch().isBlank() && !filter.getSearch().isEmpty()) {
      builder.and(qMissing.title.containsIgnoreCase(filter.getSearch()));
    }

    List<MissingPost> results = queryFactory
            .selectFrom(qMissing).distinct()
            .where(builder)
            .innerJoin(qMissing.images, qImage)
            .offset(pageable.getOffset())
            .limit(pageable.getPageSize())
            .orderBy()
            .fetch();

    long total = queryFactory
            .select(qMissing.missingId.count())
            .where(qMissing.isActive.eq(isActive))
            .from(qMissing)
            .fetchOne();

    return new PageImpl<>(results, pageable, total);
  }
</code>
</pre>

<pre>
<code>
 [After]
 @Override
  public Page<MissingPost> findByFilter(MissingFilterDto filter, Pageable pageable) {

    List<MissingPost> results = queryFactory
            .selectFrom(qMissing)
            .innerJoin(qMissing.images, qImage).fetchJoin()
            .where(getFilterExpressions(filter))
            .offset(pageable.getOffset())
            .limit(pageable.getPageSize())
            .orderBy(qMissing.updatedAt.desc())
            .fetch();

    long total = queryFactory
            .select(qMissing.missingId.count())
            .where(getFilterExpressions(filter))
            .from(qMissing)
            .fetchOne();

    return new PageImpl<>(results, pageable, total);
  }

  private BooleanExpression[] getFilterExpressions(MissingFilterDto filter) {

    return new BooleanExpression[] {
            eqAnimalType(filter.getAnimalType()),
            eqSpecifics(filter.getSpecifics()),
            containKeyword(filter.getSearch()),
            eqColor(filter.getColor()),
            goeFromDate(filter.getFromDate()),
            loeEndDate(filter.getEndDate()),
            eqIsActive(isActive)
    };
  }

  private BooleanExpression eqAnimalType(String animalType) {
    if (StringUtils.isNullOrEmpty(animalType)) {
      return null;
    }
    return qMissing.animalType.equalsIgnoreCase(animalType);
  }

  private BooleanExpression containKeyword(String keyword) {
    if (StringUtils.isNullOrEmpty(keyword)) {
      return null;
    }
    return qMissing.title.containsIgnoreCase(keyword);
  }
	...
</code>
</pre>

<hr/>
</details>

<details>
<summary>ì´ê²½ì§„</summary>

<table>
  	<tr>
  		<td align="center">
      			Before
    		</td>
		<td>
      			ì‘ì„± ì˜ˆì •
    		</td>
  	</tr>
	<tr>
		<td align="center">
			After
		</td>
		<td>
   			ì‘ì„± ì˜ˆì •
    		</td>
	</tr>
</table>
</details>

<details>
<summary>ì†ìŠ¹ë²”</summary>

<hr/>

- ğŸ“Œ [[ì½”ë“œ í™•ì¸]](https://github.com/SesacAcademy/SesacAnimal/blob/dev/src/main/java/com/project/animal/global/common/resolver/MemberDtoArgumentResolver.java#L37)

<table>
  	<tr>
  		<td align="center">
      			Before
    		</td>
		<td>
      			ì œëª©, ì‘ì„±ì, ë‚´ìš©ì— ë”°ë¥¸ ê²€ìƒ‰ ì‹œì— ìš”êµ¬ë˜ëŠ” apiì™€ 1ëŒ€1 ë§¤í•‘ê´€ê³„ í˜•ì„±<br> 
				ì¶”ê°€ë˜ëŠ” ê¸°ëŠ¥ì— ë”°ë¥¸ ë©”ì†Œë“œ ì¦ê°€ë¡œ ì¸í•œ ë¶ˆí•„ìš”í•œ ì½”ë“œ ì¦ê°€
    		</td>
  	</tr>
	<tr>
		<td align="center">
			After
		</td>
		<td>
   			ë™ì  ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì—¬ ë³€ê²½, ìˆ˜ì •ì‚¬í•­ì´ ìƒê¸¸ ì‹œì— whereì ˆë§Œ ìˆ˜ì •í•˜ê²Œë” ë³€ê²½
    		</td>
	</tr>
</table>

<pre>
<code>
        public ReadListGeneric<ReadListGeneric> readBySearch(String type, String keyword, Integer page, int size) {
            switch (type){
                case "view":
                    return readByView(page ,size, keyword);
                case "author":
                    return readByName(page ,size, keyword);
                case "title":
                    return readByTitle(page,size,keyword);
                case "content":
                    return readByContent(page, size, keyword);
            }
            return null;
        }

		// ë‚´ìš© ê²€ìƒ‰
        @Transactional(readOnly = true)
        private ReadListGeneric<ReadListGeneric> readByContent(Integer page, int size, String content) {
            Pageable pageable = createPageByCreatedAt(page,size);
            Page<ReviewPost> postList = reviewRepository.findAllWithMemberAndImageByContent(content, pageable);
            return entityToDtoByReadAll(postList);
        }

		// ì œëª© ê²€ìƒ‰
        @Transactional(readOnly = true)
        private ReadListGeneric<ReadListGeneric> readByTitle(Integer page, int size, String title) {
            Pageable pageable = createPageByCreatedAt(page,size);
            Page<ReviewPost> postList = reviewRepository.findAllWithMemberAndImageByTitle(title,pageable);
            return entityToDtoByReadAll(postList);
        }

		//ìœ ì € ë‹‰ë„¤ì„ìœ¼ë¡œ ê²€ìƒ‰
        @Transactional(readOnly = true)
        private ReadListGeneric readBynickName(Integer page, int size, String nickname) {
            Pageable pageable = createPageByCreatedAt(page,size);
            Page<ReviewPost> postList = reviewRepository.findAllWithMemberAndImageByNickname(nickname,pageable);
            return entityToDtoByReadAll(postList);
        }
</code>
</pre>

<pre>
<code>
		// ë‹‰ë„¤ì„ ê²€ìƒ‰ ì¿¼ë¦¬
		@Query(value = "SELECT p FROM ReviewPost p JOIN FETCH p.member m LEFT JOIN FETCH p.reviewImages i WHERE m.nickname = :nickname AND p.isActive = 1",
				countQuery = "SELECT count(p.id) FROM ReviewPost p JOIN p.member m WHERE m.nickname = :nickname AND p.isActive = 1")
		Page<ReviewPost> findAllWithMemberAndImageByNickname(@Param("nickname") String nickname, Pageable pageable);


		// ì œëª© ê²€ìƒ‰ ì¿¼ë¦¬
		@Query(value = "SELECT p FROM ReviewPost p JOIN FETCH p.member m LEFT JOIN FETCH p.reviewImages i WHERE p.title LIKE %:title% AND p.isActive = 1",
				countQuery = "SELECT count(p.id) FROM ReviewPost p WHERE p.title LIKE %:title% AND p.isActive = 1")
		Page<ReviewPost> findAllWithMemberAndImageByTitle(@Param("title") String title, Pageable pageable);


		//ë‚´ìš© ê²€ìƒ‰ ì¿¼ë¦¬
		@Query(value = "SELECT p FROM ReviewPost p JOIN FETCH p.member m LEFT JOIN FETCH p.reviewImages i WHERE p.content LIKE %:content% AND p.isActive = 1",
				countQuery = "SELECT count(p.id) FROM ReviewPost p WHERE p.content LIKE %:content% AND p.isActive = 1")
		Page<ReviewPost> findAllWithMemberAndImageByContent(@Param("content") String content, Pageable pageable);
</code>
</pre>

<pre>
<code>
	// ê²€ìƒ‰ ê´€ë ¨ ì„œë¹„ìŠ¤ ë¡œì§
    @Transactional(readOnly = true)
    public readList readByKeyword(String type, Integer page, int size, String keyword) {
        Pageable pageable = createPageByCreatedAt(page,size);
        Page<ReviewPost> postList = reviewPostCustomRepository.findAllWithMemberAndImageByTypeAndKeyword(type, keyword,pageable);
        return entityToDtoByReadAll(postList);
    }
</code>
</pre>

<pre>
<code>
    // ì œëª©, ì‘ì„±ì, ë‚´ìš© ê²€ìƒ‰ ë”°ë¥¸ ë™ì  ì¿¼ë¦¬ ì‘ì„±
    // íˆ¬ì› ê´€ê³„ - > íŒ¨ì¹˜ì¡°ì¸, íˆ¬ ë§¤ë‹ˆ(ì»¬ë ‰ì…˜) ê´€ê³„ -> ë°°ì¹˜ í™œìš©
    public Page<ReviewPost> findAllWithMemberAndImageByTypeAndKeyword(String type, String keyword, Pageable pageable) {
        QReviewPost reviewPost = QReviewPost.reviewPost;
        QMember member = QMember.member;

        BooleanBuilder builder = new BooleanBuilder();
        builder.and(reviewPost.isActive.eq(1));

        if(type != null && keyword != null) {
            switch(type) {
                case "author":
                    builder.and(member.nickname.eq(keyword));
                    break;
                case "title":
                    builder.and(reviewPost.title.eq(keyword));
                    break;
                case "content":
                    builder.and(reviewPost.content.contains(keyword));
                    break;
            }
        }
        List<ReviewPost> content = jpaQueryFactory
                .selectFrom(reviewPost)
                .leftJoin(reviewPost.member, member).fetchJoin()
                .where(builder)
                .orderBy(reviewPost.createdAt.desc())
                .offset(pageable.getOffset())
                .limit(pageable.getPageSize())
                .fetch();

        long total = jpaQueryFactory
                .selectFrom(reviewPost)
                .where(builder)
                .fetchCount();

        return new PageImpl<>(content, pageable, total);
    }
</code>
</pre>


</details>

<br/>

## ğŸ“‹ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ëŠë‚€ ì 

<details>
<summary>ë°•ì„±ìˆ˜</summary>

- í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° í˜„ì¬ ë‚˜ì˜ ìœ„ì¹˜ì™€ ìˆ˜ì¤€ì„ íŒŒì•…í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

- ë¦¬íŒ©í† ë§ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë˜ë©´ì„œ, í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹«ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

</details>

<details>
<summary>ë¥˜ëª…í•œ</summary>

- íš¨ìœ¨ì ì¸ í˜‘ì—…ì„ ìœ„í•´ì„œëŠ” ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì´ ì¤‘ìš”í•˜ë‹¤ê³  ë‹¤ì‹œ í•œë²ˆ ëŠê¼ˆìŠµë‹ˆë‹¤.

- ë°ì¼ë¦¬ ìŠ¤í¬ëŸ¼ì´ íš¨ê³¼ê°€ ìˆë‹¤ëŠ” ê²ƒì„ ëŠê¼ˆìŠµë‹ˆë‹¤.

</details>

<details>
<summary>ì´ê²½ì§„</summary>

- í™•ì¥ì„±ì„ ê³ ë ¤í•œ ì„¤ê³„ê°€ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ì„¤ê³„ë¥¼ í•˜ë”ë¼ë„ ìˆ˜ì •ì‚¬í•­ì´ ìƒê¸°ê²Œ ë˜ëŠ”ë° ë¯¸ë¦¬ êµ¬ìƒí•˜ê³  ì„¤ê³„ë¥¼ í•˜ë©´ ì—…ë¬´ê°€ ìˆ˜ì›”í•˜ë‹¤ëŠ” ê±¸ ëŠê¼ˆìŠµë‹ˆë‹¤.

- íš¨ìœ¨ì ì¸ ì—…ë¬´ë¥¼ ìœ„í•´ì„œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì´ ì¤‘ìš”í•˜ë‹¤ê³  ëŠê¼ˆìŠµë‹ˆë‹¤. ê³µí†µì˜ ì‘ì—…ê³¼ ì¼ì •ê³¼ ì—…ë¬´ë¥¼ ì •í•  ë•Œë„ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì´ ì›í™œí•´ì•¼ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ë˜ëŠ” ì ì„ ëŠê¼ˆìŠµë‹ˆë‹¤.

- ë°ì¼ë¦¬ ìŠ¤í¬ëŸ¼ì„ í†µí•˜ì—¬ ì‘ì—… ì§„í–‰ ì‚¬í•­ì„ ë°”ë¡œ íŒŒì•…í•˜ì—¬ ì¡°ì •í•´ë³´ì•˜ëŠ”ë° ì¢‹ì€ ê²½í—˜ì´ì—ˆìŠµë‹ˆë‹¤.

</details>

<details>
<summary>ì†ìŠ¹ë²”</summary>

- íŒ€ì˜ ëª©í‘œë¥¼ ê¸°ê°„ë³„ë¡œ ë‚˜ëˆ„ì–´ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ 2ê°€ì§€ ì¸¡ë©´ì—ì„œ ì´ì ì´ ìˆìŒì„ ì•Œê²Œë˜ì—ˆìŠµë‹ˆë‹¤.

 1. ë‚˜ì˜ ìˆ˜ì¤€ê³¼ ì—­ëŸ‰ì„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.
     
 2. í”„ë¡œì íŠ¸ ì§„í–‰ì— ëŒ€í•œ í”¼ë“œë°±ì„ ë¹ ë¥´ê²Œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
     
- ë‹¨ìˆœ ì½”ë“œë¥¼ ì¹˜ëŠ” ê²ƒë³´ë‹¤ ê³ ë¯¼ì„ í•˜ëŠ” ì‹œê°„ì„ ê°€ì§€ëŠ” ê²ƒì´ 2ê°€ì§€ ì¸¡ë©´ì—ì„œ ì´ì ì´ ìˆë‹¤ëŠ” ê²ƒì„ ë°°ì› ìŠµë‹ˆë‹¤.

 1. ë¯¸ì‹œì  ê´€ì ë³´ë‹¤ ê±°ì‹œì  ê´€ì ì—ì„œ í•´ë‹¹ ë¡œì§ì„ ë°”ë¼ë³¼ ìˆ˜ ìˆë‹¤.
 
 2. í•˜ê³  ìˆëŠ” ê³¼ì—…ì— ëŒ€í•´ ë‹¨ê³„ë³„ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.
</details>
